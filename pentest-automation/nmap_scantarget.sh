#!/bin/bash

RESDIR="Raw/Nmap"
mkdir -p $RESDIR

while [[ $# > 1 ]]
do
key="$1"

case $key in
    --client)
    OV_CLIENTNAME="$2"
    shift # past argument
    ;;
    --target)
    OV_SCANTARGET="$2"
    shift # past argument
    ;;
esac
shift # past argument or value
done

function usage
{
	echo "Usage: $0"
	echo "	--client	: Clientname"
	echo "	--target	: Target"
	echo ""
	echo "Example: $0 --client clientname --target localhost"
	exit 1
}

if [ -z "$OV_CLIENTNAME" ]
	then
		echo "No client name given."
		usage
		exit 1
fi
if [ -z "$OV_SCANTARGET" ]
	then
		echo "No scan target given."
		usage
		exit 1
fi
#nmap --append-output -Pn --system-dns --reason --webxml -p0-65535 -A -oA $RESDIR/$OV_CLIENTNAME-$OV_SCANTARGET $OV_SCANTARGET
nmap --append-output -Pn --system-dns --reason --webxml -A -oA $RESDIR/$OV_CLIENTNAME-$OV_SCANTARGET $OV_SCANTARGET
